<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BuzÃ³n de OraciÃ³n</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;background:linear-gradient(135deg,#1e3a8a 0%,#4c1d95 50%,#831843 100%);min-height:100vh;padding:20px;color:#fff}
.container{max-width:800px;margin:0 auto}
.header{text-align:center;padding:40px 0 30px}
.header h1{font-size:2.5rem;font-weight:700}
.highlight{color:#fbbf24}
.card{background:rgba(255,255,255,.1);backdrop-filter:blur(10px);border-radius:30px;padding:40px;box-shadow:0 20px 60px rgba(0,0,0,.3);margin-bottom:20px}
.btn{display:inline-flex;align-items:center;gap:10px;padding:15px 30px;border-radius:50px;font-weight:600;font-size:1.125rem;cursor:pointer;transition:all .3s;border:none;color:#fff}
.btn:hover{transform:scale(1.05)}
.btn-primary{background:linear-gradient(135deg,#3b82f6,#a855f7)}
.btn-secondary{background:linear-gradient(135deg,#10b981,#059669)}
.hidden{display:none!important}
.form-group{margin-bottom:25px}
label{display:block;margin-bottom:10px;font-weight:500}
.required{color:#f87171}
input,textarea{width:100%;padding:15px;border-radius:15px;background:rgba(255,255,255,.1);border:2px solid rgba(255,255,255,.2);color:#fff;font-size:1rem;font-family:inherit}
input::placeholder,textarea::placeholder{color:rgba(255,255,255,.5)}
textarea{resize:vertical;min-height:150px}
.tipo-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-top:15px}
.tipo-option{display:flex;align-items:center;gap:10px;padding:15px;border-radius:15px;background:rgba(255,255,255,.05);border:2px solid rgba(255,255,255,.1);cursor:pointer;transition:all .3s}
.tipo-option:hover{background:rgba(255,255,255,.1)}
.tipo-option.selected{background:rgba(255,255,255,.2);border-color:rgba(255,255,255,.5)}
.tipo-option input{display:none}
.back-btn{color:rgba(255,255,255,.8);text-decoration:none;margin-bottom:25px;cursor:pointer;display:inline-block}
@media(max-width:768px){
.header h1{font-size:2rem}
.card{padding:25px}
.tipo-grid{grid-template-columns:repeat(2,1fr)}
}
</style>
</head>
<body>
<div class="container">
<div class="header"><h1>BuzÃ³n de <span class="highlight">OraciÃ³n</span></h1></div>

<div id="welcomeScreen">
<div class="card" style="text-align:center">
<h2 style="font-size:2rem;margin-bottom:20px">Comparte con nosotros</h2>
<p style="margin-bottom:30px;color:rgba(255,255,255,.9)">"Pedid, y se os darÃ¡" - Mateo 7:7</p>
<div style="display:flex;gap:15px;justify-content:center;flex-wrap:wrap">
<button onclick="showForm('peticion')" class="btn btn-primary">ğŸ™ PeticiÃ³n de OraciÃ³n</button>
<button onclick="showForm('sugerencia')" class="btn btn-secondary">ğŸ’¡ Enviar Sugerencia</button>
</div>
</div>
</div>

<div id="formScreen" class="hidden">
<a onclick="showWelcome()" class="back-btn">â† Volver</a>
<div class="card">
<h2 id="formTitle" style="font-size:2rem;text-align:center;margin-bottom:20px"></h2>

<div class="form-group">
<label>Nombre <span class="required">*</span></label>
<input type="text" id="nombre" placeholder="Tu nombre">
</div>

<div id="emailGroup" class="form-group hidden">
<label>Email (opcional)</label>
<input type="email" id="email" placeholder="tu@email.com">
</div>

<div id="tipoGroup" class="form-group">
<label>Tipo <span class="required">*</span></label>
<div class="tipo-grid" id="tipoContainer"></div>
</div>

<div class="form-group">
<label id="textoLabel">Texto <span class="required">*</span></label>
<textarea id="texto" placeholder="Escribe aquÃ­..."></textarea>
</div>

<button onclick="enviar()" id="btnEnviar" class="btn btn-primary" style="width:100%;justify-content:center">Enviar</button>
</div>
</div>

<div id="successScreen" class="hidden">
<div class="card" style="text-align:center">
<div style="font-size:4rem;margin-bottom:20px">âœ“</div>
<h2 id="successTitle" style="font-size:2rem;margin-bottom:20px"></h2>
<p id="successMessage" style="margin-bottom:30px"></p>
<div style="display:flex;gap:15px;justify-content:center;flex-wrap:wrap">
<button onclick="nuevaAccion()" class="btn">Enviar Otro</button>
<button onclick="showWelcome()" class="btn">Volver al Inicio</button>
</div>
</div>
</div>
</div>

<script>
const URL='https://script.google.com/macros/s/AKfycbz_qID_HPCzYD00Zw6X3PwUXVOCd4wm9rE9mMgU-hhg_UOjbJ8qNekcw0nlKCQqA_9-xw/exec';
let tipo='',sel=null;

const tipos={
peticion:[
{v:'salud',e:'ğŸ™',l:'Salud'},
{v:'familia',e:'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',l:'Familia'},
{v:'trabajo',e:'ğŸ’¼',l:'Trabajo'},
{v:'guia',e:'âœ¨',l:'GuÃ­a'},
{v:'agradecimiento',e:'ğŸ™Œ',l:'Gracias'},
{v:'otro',e:'ğŸ’­',l:'Otro'}
],
sugerencia:[
{v:'culto',e:'â›ª',l:'Cultos'},
{v:'actividades',e:'ğŸ‰',l:'Actividades'},
{v:'instalaciones',e:'ğŸ›ï¸',l:'Instalaciones'},
{v:'ministerios',e:'ğŸ‘¥',l:'Ministerios'},
{v:'general',e:'ğŸ’¡',l:'General'}
]};

function showWelcome(){
document.getElementById('welcomeScreen').classList.remove('hidden');
document.getElementById('formScreen').classList.add('hidden');
document.getElementById('successScreen').classList.add('hidden');
}

function showForm(t){
tipo=t;sel=null;
document.getElementById('formTitle').textContent=t==='peticion'?'PeticiÃ³n de OraciÃ³n':'Enviar Sugerencia';
document.getElementById('textoLabel').innerHTML=(t==='peticion'?'Tu PeticiÃ³n':'Tu Sugerencia')+' <span class="required">*</span>';
document.getElementById('texto').placeholder=t==='peticion'?'Comparte tu peticiÃ³n de oraciÃ³n...':'Comparte tu sugerencia...';
document.getElementById('emailGroup').classList.toggle('hidden',t==='peticion');
document.getElementById('btnEnviar').className='btn '+(t==='peticion'?'btn-primary':'btn-secondary');
document.getElementById('btnEnviar').style.width='100%';
document.getElementById('btnEnviar').style.justifyContent='center';

const c=document.getElementById('tipoContainer');
c.innerHTML='';
tipos[t].forEach(o=>{
const d=document.createElement('div');
d.className='tipo-option';
d.onclick=()=>select(o.v,d);
d.innerHTML=`<input type="radio" name="tipo" value="${o.v}"><span style="font-size:1.5rem">${o.e}</span><span style="font-size:.875rem;font-weight:500">${o.l}</span>`;
c.appendChild(d);
});

document.getElementById('welcomeScreen').classList.add('hidden');
document.getElementById('formScreen').classList.remove('hidden');
document.getElementById('successScreen').classList.add('hidden');
}

function select(v,el){
sel=v;
document.querySelectorAll('.tipo-option').forEach(o=>o.classList.remove('selected'));
el.classList.add('selected');
}

function enviar(){
const n=document.getElementById('nombre').value.trim();
const e=document.getElementById('email').value.trim();
const tx=document.getElementById('texto').value.trim();

if(!n||!sel||!tx){alert('Por favor completa todos los campos requeridos');return;}

const btn=document.getElementById('btnEnviar');
btn.disabled=true;
btn.textContent='Enviando...';

const f=document.createElement('form');
f.method='POST';
f.action=URL;
f.target='hidden_iframe';
f.style.display='none';

const campos={tipo:tipo,nombre:n,email:e,[tipo==='peticion'?'tipoPeticion':'categoria']:sel,[tipo==='peticion'?'peticion':'sugerencia']:tx,id:Date.now()};

for(let k in campos){
const i=document.createElement('input');
i.type='hidden';
i.name=k;
i.value=campos[k];
f.appendChild(i);
}

let iframe=document.getElementById('hidden_iframe');
if(!iframe){
iframe=document.createElement('iframe');
iframe.name='hidden_iframe';
iframe.id='hidden_iframe';
iframe.style.display='none';
document.body.appendChild(iframe);
}

document.body.appendChild(f);
f.submit();

setTimeout(()=>{
btn.disabled=false;
btn.textContent='Enviar';
document.getElementById('successTitle').textContent=tipo==='peticion'?'Â¡PeticiÃ³n Recibida!':'Â¡Sugerencia Recibida!';
document.getElementById('successMessage').textContent=tipo==='peticion'?'Tu peticiÃ³n serÃ¡ incluida en nuestras oraciones. Que Dios te bendiga.':'Gracias por tu aporte para mejorar nuestra comunidad.';
document.getElementById('welcomeScreen').classList.add('hidden');
document.getElementById('formScreen').classList.add('hidden');
document.getElementById('successScreen').classList.remove('hidden');
limpiar();
document.body.removeChild(f);
},2000);
}

function nuevaAccion(){showForm(tipo);}

function limpiar(){
document.getElementById('nombre').value='';
document.getElementById('email').value='';
document.getElementById('texto').value='';
sel=null;
document.querySelectorAll('.tipo-option').forEach(o=>o.classList.remove('selected'));
}
</script>
</body>
</html>